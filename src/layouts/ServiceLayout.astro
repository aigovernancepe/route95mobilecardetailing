---
import BaseLayout from './BaseLayout.astro';
import { getTranslations, localizedUrl, type Locale } from '../i18n/utils';

interface ServiceLink {
  href: string;
  title: string;
  description?: string;
}

interface Props {
  title: string;
  description: string;
  h1: string;
  intro: string;
  currentPage: string;
  services?: ServiceLink[];
  parentCategory?: {
    href: string;
    title: string;
  };
}

const { title, description, h1, intro, currentPage, services = [], parentCategory } = Astro.props;
const locale = (Astro.currentLocale ?? 'en') as Locale;
const t = getTranslations(locale);
const contactUrl = localizedUrl(locale, 'contact');
---

<BaseLayout title={title} description={description} currentPage={currentPage}>
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-[#0a1e38] to-[#0f2a4a] text-white py-16 lg:py-20">
    <div class="max-w-7xl mx-auto px-4">
      {parentCategory && (
        <a href={parentCategory.href} class="inline-flex items-center gap-2 text-gray-300 hover:text-[#c0c7cf] mb-4 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          {t.serviceLayout.backTo} {parentCategory.title}
        </a>
      )}
      <h1 class="text-4xl lg:text-5xl font-bold mb-6">{h1}</h1>
      <p class="text-xl text-gray-300 max-w-3xl">{intro}</p>
      <div class="mt-8 flex flex-col sm:flex-row gap-4">
        <a href="tel:+17542152272" class="btn-accent inline-flex items-center justify-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          {t.serviceLayout.call}
        </a>
        <a href={contactUrl} class="bg-white text-[#0f2a4a] px-6 py-3 rounded-md font-semibold text-center hover:bg-gray-100 transition-colors">
          {t.serviceLayout.getAFreeQuote}
        </a>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-12 lg:py-16">
    <div class="max-w-7xl mx-auto px-4">
      <div class="prose prose-lg max-w-none">
        <slot />
      </div>
    </div>
  </section>

  <!-- Services Grid (if provided) -->
  {services.length > 0 && (
    <section class="py-12 lg:py-16 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-[#0f2a4a] mb-8 text-center">{t.serviceLayout.ourServices}</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {services.map(service => (
            <a href={service.href} class="service-card bg-white rounded-xl p-6 shadow-md group">
              <h2 class="text-xl font-bold text-[#0f2a4a] mb-2 group-hover:text-[#c0c7cf] transition-colors">
                {service.title}
              </h2>
              {service.description && (
                <p class="text-gray-600 mb-4">{service.description}</p>
              )}
              <span class="inline-flex items-center text-[#0f2a4a] font-medium group-hover:text-[#c0c7cf] transition-colors">
                {t.serviceLayout.learnMore}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </span>
            </a>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- CTA Section -->
  <section class="py-12 lg:py-16 bg-gradient-to-br from-[#0a1e38] to-[#0f2a4a] text-white">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold mb-4">{t.serviceLayout.readyToGetStarted}</h2>
      <p class="text-xl text-gray-300 mb-8">
        {t.serviceLayout.ctaDescription}
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="tel:+17542152272" class="btn-accent text-lg flex items-center justify-center gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          {t.serviceLayout.call}
        </a>
        <a href={contactUrl} class="bg-white text-[#0f2a4a] px-6 py-3 rounded-md font-semibold hover:bg-gray-100 transition-colors">
          {t.serviceLayout.requestAQuote}
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
